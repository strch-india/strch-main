{% comment %}
  Pagination Snippet - Fixed for AJAX / Lazy Loading
{% endcomment %}

{{ 'component-pagination.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign pagination_type = pagination | default: 'default'
  assign section_id_param = section_id | default: ''
-%}

{%- if paginate.parts.size > 0 -%}
  {%- if pagination_type == 'default' -%}
    <!-- ================= DEFAULT PAGINATION ================= -->
    <div class="pagination-wrapper" data-page="{{ paginate.current_page }}">
      <nav class="pagination" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
        <ul class="pagination__list list-unstyled" role="list">
          {%- if paginate.previous -%}
            <li>
              <a
                href="{{ paginate.previous.url }}"
                class="pagination__item pagination__item--next pagination__item-arrow link motion-reduce"
                aria-label="{{ 'general.pagination.previous' | t }}"
              >
                <span class="svg-wrapper">
                  {{ 'icon-caret.svg' | inline_asset_content }}
                </span>
              </a>
            </li>
          {%- endif -%}

          {%- for part in paginate.parts -%}
            <li>
              {%- if part.is_link -%}
                <a
                  href="{{ part.url }}"
                  class="pagination__item link"
                  aria-label="{{ 'general.pagination.page' | t: number: part.title }}"
                >
                  {{ part.title }}
                </a>
              {%- else -%}
                {%- if part.title == paginate.current_page -%}
                  <span
                    class="pagination__item pagination__item--current light"
                    aria-current="page"
                  >
                    {{ part.title }}
                  </span>
                {%- else -%}
                  <span class="pagination__item">{{ part.title }}</span>
                {%- endif -%}
              {%- endif -%}
            </li>
          {%- endfor -%}

          {%- if paginate.next -%}
            <li>
              <a
                href="{{ paginate.next.url }}"
                class="pagination__item pagination__item--prev pagination__item-arrow link motion-reduce"
                aria-label="{{ 'general.pagination.next' | t }}"
              >
                <span class="svg-wrapper">
                  {{ 'icon-caret.svg' | inline_asset_content }}
                </span>
              </a>
            </li>
          {%- endif -%}
        </ul>
      </nav>
    </div>

  {%- else -%}
    <!-- ================= LOAD MORE / INFINITE ================= -->
    <div class="pagination-load-more" data-page="{{ paginate.current_page }}">
      <div class="pagination">
        {%- if paginate.next -%}
          <div
            class="pagination-load-more auto-load"
            data-next-url="{{ paginate.next.url }}"
            {% if section_id != blank %}
              data-section-id="{{ section_id }}"
            {% endif %}
          >
            <div class="auto-load-spinner">
              <svg class="spinner" viewBox="0 0 66 66">
                <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
              </svg>
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  {%- endif -%}
{%- endif -%}
