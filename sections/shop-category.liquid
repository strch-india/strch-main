<section id="category-tab-gallery-{{ section.id }}" class="category-tab-gallery">
  <div class="container">
    
    {% if section.settings.heading != blank %}
      <h2 class="ctg-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    <!-- Tabs -->
    <div class="ctg-tabs">
      <button class="ctg-tab active" data-tab="women-{{ section.id }}">Womens</button>
      <button class="ctg-tab" data-tab="men-{{ section.id }}">Mens</button>
    </div>

    <!-- WOMEN BLOCKS -->
    <div class="ctg-grid ctg-grid-women active" id="women-{{ section.id }}">
      <div class="ctg-slider">
        {% for block in section.blocks %}
          {% if block.type == 'women_block' %}
          <a href="{{ block.settings.link }}" class="ctg-item">
            <img src="{{ block.settings.image | img_url: '600x' }}" alt="">
            {% if block.settings.label != blank %}
            <span class="ctg-label">{{ block.settings.label }}</span>
            {% endif %}
          </a>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- MEN BLOCKS -->
    <div class="ctg-grid ctg-grid-men" id="men-{{ section.id }}">
      <div class="ctg-slider">
        {% for block in section.blocks %}
          {% if block.type == 'men_block' %}
          <a href="{{ block.settings.link }}" class="ctg-item">
            <img src="{{ block.settings.image | img_url: '600x' }}" alt="">
            {% if block.settings.label != blank %}
            <span class="ctg-label">{{ block.settings.label }}</span>
            {% endif %}
          </a>
          {% endif %}
        {% endfor %}
      </div>
    </div>

  </div>
</section>

<style>
.category-tab-gallery { padding: 25px 20px; text-align: center; }

.ctg-heading { font-size: 32px; font-weight: 600; margin-bottom: 15px; margin-top: 0px; text-transform: uppercase; }

.ctg-tabs { display: flex; justify-content: center; gap: 25px; margin-bottom: 25px; }
.ctg-tab {
  background: none;
  border: none;
  font-size: 16px;
  cursor: pointer;
  padding: 6px 12px;
  font-weight: 600;
  opacity: 0.5;
  text-transform: uppercase;
  transition: all ease-in-out .3s;
  border-bottom: 2px solid #fff;
}
.ctg-tab.active, .ctg-tab:hover {
  opacity: 1;
  border-bottom: 2px solid #000;
}

/* DESKTOP GRIDS */
.ctg-grid {
  display: none;
}
.ctg-grid.active {
  display: block;
}

.ctg-item {
  position: relative;
  overflow: hidden;
  /* border-radius: 12px; */
  display: block;
}
.ctg-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.ctg-label {
  position: absolute;
  /* bottom: 60px; */
  top: 50%;
  left: 50%;
  transform: translate(-50% ,-50%);
  background: rgba(0,0,0,0.6);
  color: #fff;
  padding: 2px 22px;
  border-radius: 20px;
  border-radius: 0px;
  font-weight: 600;
  font-size: 18px;
  text-transform: uppercase;
  width: max-content;
}

/* Desktop: Grid layout */
@media(min-width: 769px) {
  .ctg-slider {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }
}

/* Mobile Slider */
@media(max-width: 768px) {
  .ctg-slider {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 0px;
  }
  
  .ctg-slider::-webkit-scrollbar{
    display: none;
  }

  .ctg-item {
    min-width: calc(40% - 6px);
    scroll-snap-align: start;
  }
  .ctg-label{
    /* bottom: 30px; */
    padding: 2px 10px;
  }
}
@media(max-width: 480px) {
  .ctg-label{
    padding: 2px 12px;
    font-size: 14px;
  }
}
@media(max-width: 380px) {
  .ctg-label{
    padding: 1px 10px;
    font-size: 13px;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const sectionID = "{{ section.id }}";
  const tabs = document.querySelectorAll(`#category-tab-gallery-${sectionID} .ctg-tab`);
  const grids = document.querySelectorAll(`#category-tab-gallery-${sectionID} .ctg-grid`);

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      grids.forEach(g => g.classList.remove("active"));
      document.getElementById(tab.dataset.tab).classList.add("active");
    });
  });
});
</script>
{% schema %}
{
  "name": "Category Tab Gallery",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "SHOP BY CATEGORY"
    }
  ],
  "blocks": [
    {
      "type": "men_block",
      "name": "Men Category Item",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "text", "id": "label", "label": "Label (optional)" }
      ]
    },
    {
      "type": "women_block",
      "name": "Women Category Item",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "text", "id": "label", "label": "Label (optional)" }
      ]
    }
  ],
  "presets": [
    { "name": "Category Tab Gallery" }
  ]
}
{% endschema %}